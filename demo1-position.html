<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>获取当前位置</title>
</head>
<body>

<script type="text/javascript">
	window.addEventListener('load', function(){
		if (navigator.geolocation){
			var options = {timeout:60000};
			navigator.geolocation.watchPosition(update, errorHandler, options);
		}
	}, false);

	function errorHandler(err) {
            if(err.code == err.PERMISSION_DENIED) {//1
               alert("Error: Access is denied!");
            }
            
            else if( err.code == 2) {
               alert("Error: Position is unavailable!");
            }
         }

	function update(position){
		var lat = position.coords.latitude;
		var lng = position.coords.longitude;
		document.write('纬度：'+lat+'，经度：'+lng);
	}
</script>

</body>
</html>
